<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ADDU SHS COMPASS - Comprehensive System</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
:root{
  --bg:#f4f7fb;--card:#fff;--muted:#6b7280;--accent:#2F3590;--accent-dark:#1f2560;
  --danger:#ef4444;--warning:#f59e0b;--success:#10b981;--border:#e6eef0;--radius:10px;
  --primary:#2F3590;--gold:#FFD700;
}
*{box-sizing:border-box}
body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:var(--bg);margin:0;color:#0f172a}

/* Login Page Styles */
.login-container{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg, rgba(47, 53, 144, 0.85), rgba(74, 81, 184, 0.85)),
             url('school-background.jpg') center/cover no-repeat;
  padding:20px;
}
.login-box{
  background:rgba(255, 255, 255, 0.95);
  backdrop-filter:blur(10px);
  border-radius:20px;
  padding:48px 40px;
  width:100%;
  max-width:520px;
  box-shadow:0 25px 70px rgba(0,0,0,0.25), 0 0 0 1px rgba(255,255,255,0.1);
}
.login-header{
  text-align:center;
  margin-bottom:32px;
}
@keyframes pulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}
.login-title{
  font-size:28px;
  font-weight:800;
  color:#2F3590;
  margin:0 0 8px 0;
}
.login-subtitle{
  font-size:14px;
  color:#6b7280;
  margin:0;
}
.welcome-text{
  font-size:20px;
  font-weight:700;
  color:#2F3590;
  margin:0 0 8px 0;
  letter-spacing:0.3px;
}
.role-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
  margin-top:24px;
}
.role-card{
  background:rgba(249, 250, 251, 0.9);
  backdrop-filter:blur(8px);
  border:2px solid rgba(229, 231, 235, 0.5);
  border-radius:16px;
  padding:28px 24px;
  text-align:center;
  cursor:pointer;
  transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position:relative;
  overflow:hidden;
}
.role-card::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background:linear-gradient(135deg, rgba(47, 53, 144, 0.05), rgba(255, 215, 0, 0.05));
  opacity:0;
  transition:opacity 0.3s ease;
}
.role-card:hover::before{
  opacity:1;
}
.role-card:hover{
  background:rgba(239, 246, 255, 0.95);
  border-color:rgba(47, 53, 144, 0.6);
  transform:translateY(-6px) scale(1.02);
  box-shadow:0 16px 32px rgba(47, 53, 144, 0.2), 0 0 0 3px rgba(255, 215, 0, 0.2);
}
.role-card:active{
  transform:translateY(-2px);
}
.role-icon{
  font-size:48px;
  margin-bottom:16px;
  transition:transform 0.3s ease;
}
.role-card:hover .role-icon{
  transform:scale(1.1);
  animation:pulse 0.6s ease-in-out;
}
.role-name{
  font-size:17px;
  font-weight:700;
  color:#0f172a;
  margin:0 0 8px 0;
  letter-spacing:0.3px;
  position:relative;
  z-index:1;
}
.role-desc{
  font-size:13px;
  color:#6b7280;
  margin:0;
  line-height:1.5;
  position:relative;
  z-index:1;
}

/* Hide all dashboards by default */
#loginPage,#teacherDashboard,#adviserDashboard,#chairDashboard,#apDashboard{display:none}
</style>
</head>
<body>

<!-- ========== LOGIN PAGE ========== -->
<div id="loginPage">
  <div class="login-container">
    <div class="login-box">
      <div class="login-header">
        <h2 style="font-size:22px;font-weight:700;color:#2F3590;margin:0 0 12px 0;letter-spacing:0.5px">Welcome to ADDU SHS</h2>
        <h1 class="login-title" style="margin-bottom:16px">COMPASS</h1>
        <p class="login-subtitle" style="font-size:15px;font-weight:600;color:#374151;margin:0 0 8px 0">Comprehensive Monitoring & Progress Assessment Support System</p>
        <p class="login-subtitle" style="margin-top:8px;font-size:13px;font-style:italic;color:#6b7280">Ateneo de Davao University - Senior High School</p>
      </div>
      
      <h3 style="text-align:center;margin:28px 0 20px 0;color:#2F3590;font-size:18px;font-weight:700;letter-spacing:0.3px">Select Your Role</h3>
      
      <div class="role-grid">
        <div class="role-card" onclick="login('teacher')">
          <div class="role-name">Teacher</div>
          <p class="role-desc">Manage class records & interventions</p>
        </div>
        
        <div class="role-card" onclick="login('adviser')">
          <div class="role-name">Class Adviser</div>
          <p class="role-desc">Monitor section cases</p>
        </div>
        
        <div class="role-card" onclick="login('chairperson')">
          <div class="role-name">Chairperson</div>
          <p class="role-desc">Strand-level oversight</p>
        </div>
        
        <div class="role-card" onclick="login('ap')">
          <div class="role-name">Assistant Principal</div>
          <p class="role-desc">School-wide analytics</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ========== TEACHER DASHBOARD ========== -->
<div id="teacherDashboard">
  <iframe id="teacherFrame" style="width:100%;height:100vh;border:none"></iframe>
</div>

<!-- ========== ADVISER DASHBOARD ========== -->
<div id="adviserDashboard">
  <iframe id="adviserFrame" style="width:100%;height:100vh;border:none"></iframe>
</div>

<!-- ========== CHAIRPERSON DASHBOARD ========== -->
<div id="chairDashboard">
  <iframe id="chairFrame" style="width:100%;height:100vh;border:none"></iframe>
</div>

<!-- ========== AP DASHBOARD ========== -->
<div id="apDashboard">
  <iframe id="apFrame" style="width:100%;height:100vh;border:none"></iframe>
</div>

<script>
// Show login page initially
document.getElementById('loginPage').style.display = 'block'

// Login function
function login(role) {
  // Hide login page
  document.getElementById('loginPage').style.display = 'none'
  
  // Show appropriate dashboard
  const dashboards = {
    'teacher': 'teacherDashboard',
    'adviser': 'adviserDashboard',
    'chairperson': 'chairDashboard',
    'ap': 'apDashboard'
  }
  
  const dashboardId = dashboards[role]
  document.getElementById(dashboardId).style.display = 'block'
  
  // Load the appropriate HTML file (CORRECTED FILE NAMES)
  const frameId = role + 'Frame'
  const htmlFiles = {
    'teacher': 'teacher-dashboard.html',
    'adviser': 'adviser-dashboard-addu.html',
    'chairperson': 'chairperson-dashboard-addu.html',  // FIXED: Added -addu
    'ap': 'ap-dashboard-addu.html'
  }
  
  // Open dashboard in new tab
  window.open(htmlFiles[role], '_blank')
  
  // Store current role
  sessionStorage.setItem('currentRole', role)
  
  // Return to login page after opening
  setTimeout(() => {
    document.getElementById('loginPage').style.display = 'block'
    document.getElementById(dashboardId).style.display = 'none'
  }, 300)
}

// Listen for logout events from iframes
window.addEventListener('message', function(e) {
  if (e.data === 'logout') {
    logout()
  }
})

function logout() {
  // Hide all dashboards
  document.getElementById('teacherDashboard').style.display = 'none'
  document.getElementById('adviserDashboard').style.display = 'none'
  document.getElementById('chairDashboard').style.display = 'none'
  document.getElementById('apDashboard').style.display = 'none'
  
  // Show login page
  document.getElementById('loginPage').style.display = 'block'
  
  // Clear current role
  sessionStorage.removeItem('currentRole')
}

// Check if user was previously logged in
window.addEventListener('load', function() {
  const currentRole = sessionStorage.getItem('currentRole')
  if (currentRole) {
    login(currentRole)
  }
})
</script>
</body>
</html>